# 决策日志（最小版）

## 目标

记录关键项目决策，让进度、取舍与回滚路径保持清晰。

## 何时新增记录

出现以下任一情况时新增一条：

1. 范围变更（里程碑内容增加或删除）。
2. 技术方向变更（引擎/工具链/流程）。
3. 删除策略出现例外（`P0/P1` 清理）。
4. 排期变化（里程碑延迟超过 1 周）。

## 编号与状态

- 编号格式：`DL-YYYYMMDD-XX`
- 状态取值：`Proposed` | `Accepted` | `Rejected` | `Superseded` | `Reverted`

## 记录模板（可复制）

```md
### [DL-YYYYMMDD-XX] <简短标题>

- 日期：YYYY-MM-DD
- 负责人：<name>
- 状态：Proposed/Accepted/Rejected/Superseded/Reverted
- 关联：<issue/pr/commit/doc links>

#### 背景
当前要解决的具体问题是什么？

#### 决策
我们具体选择了什么？

#### 人类工作量影响（核心）
- 减少的人类工时：
- 增加的人类工时：
- 对关键路径的变化：

#### AI 工作量假设
哪些部分交给 AI，哪些仍必须人工完成？

#### 备选方案
1. 方案A：
2. 方案B：

#### 风险与触发信号
- 风险1：
- 触发信号：

#### 验证计划
- 成功指标：
- 检查日期：

#### 回滚方案
若该决策失败，如何安全撤销？

#### 后续动作
下一步的具体动作与负责人。
```

## 初始记录

### [DL-20260223-01] 清理前先落地最小 PM 治理

- 日期：2026-02-23
- 负责人：Team
- 状态：Accepted
- 关联：`docs/pm/DELETE_POLICY.md`

#### 背景
需要清理废弃代码，但若缺少统一流程，删除风险较高。

#### 决策
先建立最小治理文档，再按批次执行删除并记录可回滚点。

#### 人类工作量影响（核心）
- 减少的人类工时：降低清理阶段审查与回滚沟通成本。
- 增加的人类工时：前期需要少量文档搭建时间。
- 对关键路径的变化：清理任务可更安全地并行推进。

#### AI 工作量假设
AI 负责候选清单与补丁草案；人工负责风险定级与最终删除决策。

#### 备选方案
1. 不设策略直接清理。
2. 先做完整重型 PM 系统再开始动作。

#### 风险与触发信号
- 风险：团队执行时不遵守策略。
- 触发信号：删除 commit 缺少测试证据或缺少日志记录。

#### 验证计划
- 成功指标：每个删除批次都包含测试、回滚哈希和决策记录。
- 检查日期：每周一次。

#### 回滚方案
回滚该删除批次 commit，并将候选项降级为 `P1/P0` 待人工复核。

#### 后续动作
先产出第一版删除候选清单，再执行一批 `P2` 清理。

### [DL-20260223-02] 执行首批 P2 清理（examples + robust 遗留）

- 日期：2026-02-23
- 负责人：Team
- 状态：Accepted
- 关联：`docs/pm/DELETE_POLICY.md`

#### 背景
用户确认 `linshi/` 作为日常尝试区保留，优先清理 `examples` 与 `robust_game_toolkit` 中低风险遗留项。

#### 决策
删除以下 `P2` 项：
1. `examples/stack_logger_example.py`
2. `robust_game_toolkit/rendering/**`（未被运行路径引用，且模块不完整）
3. `robust_game_toolkit/core/assets/fonts/SourceHanSans-Regular.otf`（实为 HTML 文件，非真实字体）

#### 人类工作量影响（核心）
- 减少的人类工时：降低目录噪音与后续误判成本，减少无效体积与审查干扰。
- 增加的人类工时：一次性引用检查和回归验证。
- 对关键路径的变化：不影响主流程开发，清理可持续推进。

#### AI 工作量假设
AI 负责引用扫描、候选筛选、删除执行和测试回报；人工负责删除范围确认与继续/停止决策。

#### 备选方案
1. 先不删，等功能冻结后统一清理。
2. 一次性清理 `robust_game_toolkit` 更多 0 引用模块。

#### 风险与触发信号
- 风险：存在未覆盖到的隐式导入路径。
- 触发信号：`pytest` 失败，或运行入口出现 ImportError/资源加载错误。

#### 验证计划
- 成功指标：`./.venv311/bin/python -m pytest -q` 通过（允许既有 warnings）。
- 检查日期：2026-02-23（已执行通过）。

#### 回滚方案
若后续发现回归，按本批次提交执行 `git revert <commit_hash>`；当前尚未提交，必要时可先从索引恢复。

#### 后续动作
继续做第二批 `P2` 候选评估，但保留 `linshi/`。

### [DL-20260223-03] 追加删除 robust 无引用大字体

- 日期：2026-02-23
- 负责人：Team
- 状态：Accepted
- 关联：`docs/pm/DELETE_POLICY.md`

#### 背景
`robust_game_toolkit` 体积较大，其中 `NotoSerifCJKsc.otf` 单文件约 53MB，且仓库内未检索到引用。

#### 决策
删除 `robust_game_toolkit/core/assets/fonts/NotoSerifCJKsc.otf`，并立即执行全量回归测试。

#### 人类工作量影响（核心）
- 减少的人类工时：降低仓库体积与后续同步/审查负担。
- 增加的人类工时：一次额外验证测试。
- 对关键路径的变化：不影响主功能开发节奏。

#### AI 工作量假设
AI 执行引用检查、删除和回归测试；人工只做删除边界确认。

#### 备选方案
1. 暂不删除，等发布前统一压缩。
2. 进一步清理 `robust_game_toolkit` 的低引用模块。

#### 风险与触发信号
- 风险：存在未覆盖的动态路径引用字体文件。
- 触发信号：运行期字体加载失败或 UI 字体回退异常。

#### 验证计划
- 成功指标：`./.venv311/bin/python -m pytest -q` 通过（允许既有 warning）。
- 检查日期：2026-02-23（已通过）。

#### 回滚方案
提交后使用 `git revert <commit_hash>`；未提交阶段可恢复暂存区。

#### 后续动作
继续按 `P2` 规则评估 `robust_game_toolkit/core` 内 0 引用模块，逐批处理。

### [DL-20260223-04] 清理 robust 低引用诊断与打包遗留

- 日期：2026-02-23
- 负责人：Team
- 状态：Accepted
- 关联：`docs/pm/DELETE_POLICY.md`

#### 背景
在前两批清理后，`robust_game_toolkit` 仍存在一组低价值遗留文件：本地打包脚本、未接入的诊断模块、未引用主题文件。

#### 决策
删除以下 `P2` 文件：
1. `robust_game_toolkit/setup.py`
2. `robust_game_toolkit/core/diagnostics.py`
3. `robust_game_toolkit/core/constants/diagnostics.py`
4. `robust_game_toolkit/core/assets/theme.json`

#### 人类工作量影响（核心）
- 减少的人类工时：减少目录噪音和误判成本，降低后续维护负担。
- 增加的人类工时：一次额外引用核查与回归测试。
- 对关键路径的变化：不影响主流程开发与测试链路。

#### AI 工作量假设
AI 负责扫描引用、执行删除、回归测试；人工负责最终删除边界确认。

#### 备选方案
1. 暂缓删除，待版本冻结统一清理。
2. 一次性清空 `robust_game_toolkit/core` 的所有低引用模块。

#### 风险与触发信号
- 风险：存在未覆盖到的隐式引用或手工脚本依赖。
- 触发信号：运行期 ImportError 或资源加载失败。

#### 验证计划
- 成功指标：`./.venv311/bin/python -m pytest -q` 通过（允许既有 warning）。
- 检查日期：2026-02-23（已通过）。

#### 回滚方案
提交后按批次 commit 进行 `git revert <commit_hash>`；未提交阶段可直接从索引恢复。

#### 后续动作
下一步仅评估 `robust_game_toolkit/core` 中“外部 0 引用且内部低依赖”的模块，不动主链路模块。
