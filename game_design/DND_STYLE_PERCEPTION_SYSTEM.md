# DND风格感知系统设计 (DND_STYLE_PERCEPTION_SYSTEM.md)

## 🎯 核心问题重新思考

你说得对！我的分层感知系统确实又回到了杀戮尖塔的"意图系统"模式。让我重新设计一个真正独特的DND风格感知系统。

## 🛡️ DND风格感知系统：不是看意图，而是改变战斗规则

### 1. **感知不是"看穿意图"，而是"改变战斗规则"**

```
DND感知系统核心：
- 感知18+：获得"先攻优势" + "机会攻击" + "专注豁免"
- 感知15-17：获得"先攻优势" + "机会攻击"
- 感知12-14：获得"先攻优势"
- 感知9-11：正常战斗
- 感知6-8：受到"劣势"惩罚
```

### 2. **先攻系统 (Initiative System)**

```
感知影响先攻：
- 感知18+：总是先手，敌人无法反击
- 感知15-17：75%概率先手
- 感知12-14：50%概率先手
- 感知9-11：25%概率先手
- 感知6-8：总是后手，受到敌人反击

先攻效果：
- 先手：本回合敌人无法使用防御技能
- 后手：敌人先行动，玩家受到反击伤害
```

### 3. **机会攻击系统 (Opportunity Attack)**

```
感知15+解锁机会攻击：
- 当敌人使用"准备"类技能时，玩家可以立即反击
- 机会攻击不消耗行动点
- 机会攻击伤害 = 基础伤害 + 感知修正值

示例：
敌人："准备使用尖锐质疑"
玩家感知16：立即反击，造成8点伤害
敌人：技能被中断，无法使用
```

### 4. **专注豁免系统 (Concentration Save)**

```
感知18+解锁专注豁免：
- 当敌人使用"干扰"类技能时，玩家可以豁免
- 豁免成功率 = 感知修正值 * 10%
- 豁免成功：完全免疫该技能效果

示例：
敌人："使用方法论批判"
玩家感知18：豁免检定成功，免疫所有效果
```

### 5. **劣势系统 (Disadvantage)**

```
感知6-8受到劣势惩罚：
- 所有攻击卡牌伤害-2
- 所有防御卡牌效果-1
- 抽牌数量-1
- 无法使用"策略"类卡牌

补偿机制：
- 其他属性可以提供感知补偿
- 专长可以消除劣势
- 职业特殊能力可以部分抵消
```

## 🎮 各职业感知策略

### 1. **学术武僧 (感知18-20)**
```
核心优势：
- 总是先手，控制战斗节奏
- 机会攻击，打断敌人技能
- 专注豁免，免疫干扰效果

战斗风格：
- 主动出击，快速解决战斗
- 利用先手优势建立优势
- 通过机会攻击控制敌人
```

### 2. **理论学者 (感知15-17)**
```
核心优势：
- 高概率先手
- 机会攻击能力
- 策略卡牌效果增强

战斗风格：
- 平衡型，攻防兼备
- 利用先手建立优势
- 通过机会攻击获得额外收益
```

### 3. **实验学者 (感知12-14)**
```
核心优势：
- 50%先手概率
- 实验数据辅助
- 稳定的战斗表现

战斗风格：
- 稳健型，依靠实验数据
- 通过实验推测敌人模式
- 积累优势，逐步取胜
```

### 4. **社会学者 (感知12-14)**
```
核心优势：
- 50%先手概率
- 社交直觉补偿
- 非战斗收益增强

战斗风格：
- 社交型，通过互动获得优势
- 利用社交直觉推测敌人
- 注重非战斗收益
```

### 5. **跨学科研究者 (感知12-14)**
```
核心优势：
- 50%先手概率
- 多领域分析
- 适应性强的战斗风格

战斗风格：
- 灵活型，适应不同敌人
- 通过多领域知识分析
- 根据情况调整策略
```

### 6. **临床研究者 (感知9-11)**
```
核心挑战：
- 25%先手概率
- 容易受到敌人反击
- 需要其他属性补偿

战斗风格：
- 防御型，注重生存
- 通过临床经验推测敌人
- 依靠其他属性获得优势
```

## 🎯 感知相关专长设计

### 1. **感知提升专长**
```
敏锐观察 (Perception 12+)：
- 效果：感知+2
- 限制：最多提升到16

深度分析 (Perception 14+)：
- 效果：感知+3，但每回合受到1点压力
- 风险：高感知但增加压力风险

预判大师 (Perception 16+)：
- 效果：先攻概率+25%
- 限制：每回合只能使用1次
```

### 2. **感知补偿专长**
```
辩论直觉 (Persuasion 14+)：
- 效果：感知劣势时，说服力提供先攻补偿
- 适用：感知低的职业

模式识别 (Insight 14+)：
- 效果：感知劣势时，洞察力提供豁免补偿
- 适用：感知低的职业

快速反应 (Reaction Speed 14+)：
- 效果：感知劣势时，反应速度提供先攻补偿
- 适用：感知低的职业
```

## 🎮 系统优势

### 1. **真正的DND风格**
- 感知影响战斗规则，而不是简单的信息显示
- 先攻、机会攻击、专注豁免等经典DND机制
- 劣势系统增加策略深度

### 2. **避免杀戮尖塔模式**
- 不是"看穿意图"，而是"改变战斗规则"
- 感知高低都有独特的战斗策略
- 通过其他属性补偿感知不足

### 3. **策略多样性**
- 高感知：主动出击，控制节奏
- 中等感知：平衡型，稳健发展
- 低感知：防御型，依靠其他属性

### 4. **平衡性保障**
- 感知差异不会导致"不能玩"
- 每个职业都有独特的感知策略
- 通过专长和属性补偿保持平衡

## 📋 实现建议

### 1. **先攻计算系统**
```python
def calculate_initiative(perception, other_attributes):
    """计算先攻概率"""
    base_chance = 0.25  # 基础25%先手概率
    
    # 感知加成
    if perception >= 18:
        return 1.0  # 总是先手
    elif perception >= 15:
        return 0.75
    elif perception >= 12:
        return 0.50
    elif perception >= 9:
        return 0.25
    else:
        return 0.0  # 总是后手
```

### 2. **机会攻击系统**
```python
def can_opportunity_attack(perception):
    """检查是否可以机会攻击"""
    return perception >= 15

def opportunity_attack_damage(base_damage, perception):
    """计算机会攻击伤害"""
    perception_bonus = max(0, perception - 10)
    return base_damage + perception_bonus
```

### 3. **专注豁免系统**
```python
def concentration_save(perception):
    """专注豁免检定"""
    if perception < 18:
        return False
    
    save_dc = 10 + (20 - perception)  # 感知越高，豁免越容易
    roll = random.randint(1, 20)
    return roll >= save_dc
```

## 🎮 总结

这个DND风格感知系统的核心是：
1. **感知不是"看穿意图"，而是"改变战斗规则"**
2. **通过先攻、机会攻击、专注豁免等DND机制体现感知价值**
3. **感知高低都有独特的战斗策略，避免"不能玩"的问题**
4. **通过专长和属性补偿保持游戏平衡**

这样既保持了DND的经典机制，又避免了回到杀戮尖塔的意图系统模式。 